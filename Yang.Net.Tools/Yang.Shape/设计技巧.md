# 框架设计技巧



### 善用属性注入

Autofac属性注入的优点：

- 可以代替构造函数注入
- 子类继承了父类，只需要在父类中进行属性注入，子类即可获得相应访问。

缺点或不足：

- 由于先执行构造函数，其次执行属性的定义。因此采用属性注入，不能在构造函数中引用属性值。

- 由于控制器不是通过容器创建的，而是通过Route+反射生成 的，因此默认情况下不能在控制器中使用属性注入，需要修改设置：

  ```csharp
  //改为通过容器生成，这样可以使用Autofac属性注入
  builder.Services.AddControllers().AddControllersAsServices(); 
  ```

  

合理引入Autofac模块注入：

