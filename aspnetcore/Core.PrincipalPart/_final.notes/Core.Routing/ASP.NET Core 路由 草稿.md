# ASP.NET Core 路由

路由在应用中定义，并在应用启动时进行配置。 路由可以选择从请求包含的 URL 中提取值，然后这些值便可用于处理请求。路由功能负责将传入请求映射到路由处理程序。通过使用应用中的路由信息，路由功能还能生成要映射到路由处理程序的 URL。 因此，路由可以根据 URL 查找路由处理程序，或者根据路由处理程序信息查找给定路由处理程序对应的 URL。

路由分为传统路由和属性路由：

- 传统路由：基于Controller和Action，支持基本的描述性路由方案，一般用于浏览器使用的Web应用。
- 属性路由：使用属性注解的形式标注的路由，常使用HTTP谓词属性注解。Web API应该使用属性路由，将应用功能建模为一组资源，其中操作是由 HTTP 谓词表示。也就是说，对同一逻辑资源执行的许多操作（例如，GET、POST）都将使用相同 URL。 

注：推荐使用属性路由，因为它提供了更大的灵活性，并且更能满足RESTful设计思想。



## 路由基础知识

路由基于IRouter，将传入请求映射到路由处理程序，生成响应中使用的 URL。

通常情况下，应用具有一个路由集合。 请求到达时，将按顺序处理路由集合，通过对路由集合中的每个可用路由调用 RouteAsync 方法来查找与请求 URL 匹配的路由。与此相反，响应可根据路由信息使用路由生成 URL（例如，用于重定向或链接），并因此避免需要硬编码 URL，这有助于可维护性。

路由通过 RouterMiddleware 类连接到中间件管道。 ASP.NET Core MVC 向中间件管道添加路由，作为其配置的一部分。 若要了解如何使用路由作为独立组件，请参阅使用路由中间件部分（见下文）。

#### URL匹配

URL 匹配是一个过程，通过该过程，路由可向处理程序调度传入请求。传入请求将进入 RouterMiddleware，后者将对序列中的每个路由调用 RouteAsync 方法。 IRouter 实例将选择是否通过将 RouteContext.Handler 设置为非 NULL RequestDelegate 来处理请求。 如果路由为请求设置处理程序，将停止路由处理，并调用处理程序来处理该请求。 如果尝试了所有路由，且请求未找到任何处理程序，中间件将调用 next，请求管道中的下一个中间件将被调用。















































